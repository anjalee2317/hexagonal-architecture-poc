{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.202.0"},"children":{"TaskApp-dev":{"id":"TaskApp-dev","path":"TaskApp-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.202.0"},"children":{"EventBus":{"id":"EventBus","path":"TaskApp-dev/EventBus","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"TaskEventBus":{"id":"TaskEventBus","path":"TaskApp-dev/EventBus/TaskEventBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/TaskEventBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"name":"task-event-bus-dev"}}}}},"NotificationFunction":{"id":"NotificationFunction","path":"TaskApp-dev/EventBus/NotificationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"TaskApp-dev/EventBus/NotificationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"TaskApp-dev/EventBus/NotificationFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/NotificationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"TaskApp-dev/EventBus/NotificationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/NotificationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["ses:SendEmail","ses:SendRawEmail","ses:SendTemplatedEmail"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EventBusNotificationFunctionServiceRoleDefaultPolicy0BC52FF5","roles":[{"Ref":"EventBusNotificationFunctionServiceRole3A2C9978"}]}}}}}}},"Code":{"id":"Code","path":"TaskApp-dev/EventBus/NotificationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"TaskApp-dev/EventBus/NotificationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"TaskApp-dev/EventBus/NotificationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/NotificationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-265613951253-us-east-1","s3Key":"ef76b0d3879fe62cb70f63ba7ee5e1de5eca159a5910c3c5ed4dba7eeae5fe06.zip"},"description":"Lambda function to process notification events and send emails","environment":{"variables":{"ENVIRONMENT":"dev","REGION":"us-east-1","DEFAULT_SENDER":"noreply@taskapp-dev.com"}},"handler":"notificationFunction.handler","role":{"Fn::GetAtt":["EventBusNotificationFunctionServiceRole3A2C9978","Arn"]},"runtime":"nodejs18.x","timeout":30}}},"EventBusInvokePermission":{"id":"EventBusInvokePermission","path":"TaskApp-dev/EventBus/NotificationFunction/EventBusInvokePermission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["EventBusTaskEventBusB09EB18E","Arn"]}}}}}},"UserRegistrationRule":{"id":"UserRegistrationRule","path":"TaskApp-dev/EventBus/UserRegistrationRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/UserRegistrationRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Rule to capture user registration events","eventBusName":{"Ref":"EventBusTaskEventBusB09EB18E"},"eventPattern":{"source":["com.taskapp.auth"],"detail-type":["UserRegistration"]},"name":"user-registration-rule-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]}}]}}},"AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C":{"id":"AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C","path":"TaskApp-dev/EventBus/UserRegistrationRule/AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["EventBusUserRegistrationRule017B3EC4","Arn"]}}}}}},"TaskCreationRule":{"id":"TaskCreationRule","path":"TaskApp-dev/EventBus/TaskCreationRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/TaskCreationRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Rule to capture task creation events","eventBusName":{"Ref":"EventBusTaskEventBusB09EB18E"},"eventPattern":{"source":["com.taskapp.tasks"],"detail-type":["TaskCreation"]},"name":"task-creation-rule-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]}}]}}},"AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C":{"id":"AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C","path":"TaskApp-dev/EventBus/TaskCreationRule/AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["EventBusTaskCreationRule37E3450E","Arn"]}}}}}},"TaskCompletionRule":{"id":"TaskCompletionRule","path":"TaskApp-dev/EventBus/TaskCompletionRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/EventBus/TaskCompletionRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"description":"Rule to capture task completion events","eventBusName":{"Ref":"EventBusTaskEventBusB09EB18E"},"eventPattern":{"source":["com.taskapp.tasks"],"detail-type":["TaskCompletion"]},"name":"task-completion-rule-dev","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]}}]}}},"AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C":{"id":"AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C","path":"TaskApp-dev/EventBus/TaskCompletionRule/AllowEventRuleTaskAppdevEventBusNotificationFunction5247DB1C","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["EventBusNotificationFunction536AC88F","Arn"]},"principal":"events.amazonaws.com","sourceArn":{"Fn::GetAtt":["EventBusTaskCompletionRule189876BA","Arn"]}}}}}},"EventBusArn":{"id":"EventBusArn","path":"TaskApp-dev/EventBus/EventBusArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"NotificationLambdaArn":{"id":"NotificationLambdaArn","path":"TaskApp-dev/EventBus/NotificationLambdaArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}}}},"Cognito":{"id":"Cognito","path":"TaskApp-dev/Cognito","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"UserTable":{"id":"UserTable","path":"TaskApp-dev/Cognito/UserTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UserTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"},{"attributeName":"email","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"EmailIndex","keySchema":[{"attributeName":"email","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"userId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"TaskApp-Users-dev"}}},"ScalingRole":{"id":"ScalingRole","path":"TaskApp-dev/Cognito/UserTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}}}},"PostConfirmationFunction":{"id":"PostConfirmationFunction","path":"TaskApp-dev/Cognito/PostConfirmationFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"TaskApp-dev/Cognito/PostConfirmationFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"TaskApp-dev/Cognito/PostConfirmationFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/PostConfirmationFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"TaskApp-dev/Cognito/PostConfirmationFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/PostConfirmationFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["CognitoUserTable7F357C62","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["CognitoUserTable7F357C62","Arn"]},"/index/*"]]}]},{"Action":["ses:SendEmail","ses:SendRawEmail"],"Effect":"Allow","Resource":"*"},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::Join":["",["arn:aws:events:us-east-1:265613951253:event-bus/",{"Ref":"EventBusTaskEventBusB09EB18E"}]]}}],"Version":"2012-10-17"},"policyName":"CognitoPostConfirmationFunctionServiceRoleDefaultPolicy9D268F31","roles":[{"Ref":"CognitoPostConfirmationFunctionServiceRoleF6B20541"}]}}}}}}},"Code":{"id":"Code","path":"TaskApp-dev/Cognito/PostConfirmationFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"TaskApp-dev/Cognito/PostConfirmationFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"TaskApp-dev/Cognito/PostConfirmationFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/PostConfirmationFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-265613951253-us-east-1","s3Key":"44bc3cd203276ac8050aa00a4bcaabf4c9f6f84ae6ddaeaa7aa84521578bbaaf.zip"},"description":"Handles post confirmation actions for Cognito users","environment":{"variables":{"USER_TABLE_NAME":{"Ref":"CognitoUserTable7F357C62"},"EVENT_BUS_NAME":{"Ref":"EventBusTaskEventBusB09EB18E"},"REGION":"us-east-1","FROM_EMAIL":"no-reply@yourdomain.com"}},"handler":"postConfirmationFunction.handler","role":{"Fn::GetAtt":["CognitoPostConfirmationFunctionServiceRoleF6B20541","Arn"]},"runtime":"nodejs18.x","timeout":30}}}}},"UserPool":{"id":"UserPool","path":"TaskApp-dev/Cognito/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.202.0","metadata":[]},"children":{"PostConfirmationCognito":{"id":"PostConfirmationCognito","path":"TaskApp-dev/Cognito/UserPool/PostConfirmationCognito","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CognitoPostConfirmationFunctionA4977283","Arn"]},"principal":"cognito-idp.amazonaws.com","sourceArn":{"Fn::GetAtt":["CognitoUserPool279BBD48","Arn"]}}}},"smsRole":{"id":"smsRole","path":"TaskApp-dev/Cognito/UserPool/smsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportsmsRole":{"id":"ImportsmsRole","path":"TaskApp-dev/Cognito/UserPool/smsRole/ImportsmsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UserPool/smsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"sts:ExternalId":"TaskAppdevCognitoUserPoolFC9349F2"}},"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"sns-publish","policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}]}}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"aliasAttributes":["email","phone_number"],"autoVerifiedAttributes":["email"],"emailVerificationMessage":"Thank you for signing up to TaskApp! Your verification code is {####}","emailVerificationSubject":"Verify your email for TaskApp","enabledMfas":["SMS_MFA","SOFTWARE_TOKEN_MFA"],"lambdaConfig":{"postConfirmation":{"Fn::GetAtt":["CognitoPostConfirmationFunctionA4977283","Arn"]}},"mfaConfiguration":"OPTIONAL","policies":{"passwordPolicy":{"minimumLength":12,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true,"temporaryPasswordValidityDays":1,"passwordHistorySize":12}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"phone_number","mutable":true,"required":true}],"smsConfiguration":{"externalId":"TaskAppdevCognitoUserPoolFC9349F2","snsCallerArn":{"Fn::GetAtt":["CognitoUserPoolsmsRole738960F0","Arn"]}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameConfiguration":{"caseSensitive":true},"userPoolAddOns":{"advancedSecurityMode":"ENFORCED"},"userPoolName":"TaskApp-UserPool-dev","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"Thank you for signing up to TaskApp! Your verification code is {####}","emailSubject":"Verify your email for TaskApp","smsMessage":"The verification code to your new account is {####}"}}}},"CognitoDomain":{"id":"CognitoDomain","path":"TaskApp-dev/Cognito/UserPool/CognitoDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UserPool/CognitoDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"taskapp-dev-26561395","userPoolId":{"Ref":"CognitoUserPool279BBD48"}}}}}},"ResourceServer":{"id":"ResourceServer","path":"TaskApp-dev/Cognito/UserPool/ResourceServer","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolResourceServer","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UserPool/ResourceServer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolResourceServer","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolResourceServer","aws:cdk:cloudformation:props":{"identifier":"taskapp","name":"taskapp","scopes":[{"scopeName":"read","scopeDescription":"Read access"},{"scopeName":"write","scopeDescription":"Write access"}],"userPoolId":{"Ref":"CognitoUserPool279BBD48"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"TaskApp-dev/Cognito/UserPool/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UserPool/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","phone","openid","profile"],"callbackUrLs":["http://localhost:3000/callback"],"clientName":"TaskApp-Client-dev","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_ADMIN_USER_PASSWORD_AUTH","ALLOW_CUSTOM_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"idTokenValidity":60,"logoutUrLs":["http://localhost:3000/logout"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"CognitoUserPool279BBD48"}}}}}}}},"IdentityPool":{"id":"IdentityPool","path":"TaskApp-dev/Cognito/IdentityPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPool","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPool","aws:cdk:cloudformation:props":{"allowUnauthenticatedIdentities":false,"cognitoIdentityProviders":[{"clientId":{"Ref":"CognitoUserPoolUserPoolClient1E6BF456"},"providerName":{"Fn::GetAtt":["CognitoUserPool279BBD48","ProviderName"]}}],"identityPoolName":"TaskApp-IdentityPool-dev"}}},"AuthenticatedRole":{"id":"AuthenticatedRole","path":"TaskApp-dev/Cognito/AuthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportAuthenticatedRole":{"id":"ImportAuthenticatedRole","path":"TaskApp-dev/Cognito/AuthenticatedRole/ImportAuthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/AuthenticatedRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"cognito-identity.amazonaws.com:aud":{"Ref":"CognitoIdentityPool2E2E339F"}},"ForAnyValue:StringLike":{"cognito-identity.amazonaws.com:amr":"authenticated"}},"Effect":"Allow","Principal":{"Federated":"cognito-identity.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"TaskApp-dev/Cognito/AuthenticatedRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/AuthenticatedRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-sync:*","mobileanalytics:PutEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CognitoAuthenticatedRoleDefaultPolicyBA464B40","roles":[{"Ref":"CognitoAuthenticatedRole61C456EC"}]}}}}}}},"UnauthenticatedRole":{"id":"UnauthenticatedRole","path":"TaskApp-dev/Cognito/UnauthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportUnauthenticatedRole":{"id":"ImportUnauthenticatedRole","path":"TaskApp-dev/Cognito/UnauthenticatedRole/ImportUnauthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UnauthenticatedRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"cognito-identity.amazonaws.com:aud":{"Ref":"CognitoIdentityPool2E2E339F"}},"ForAnyValue:StringLike":{"cognito-identity.amazonaws.com:amr":"unauthenticated"}},"Effect":"Allow","Principal":{"Federated":"cognito-identity.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"TaskApp-dev/Cognito/UnauthenticatedRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/Cognito/UnauthenticatedRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["cognito-sync:*","mobileanalytics:PutEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CognitoUnauthenticatedRoleDefaultPolicyC2A227EF","roles":[{"Ref":"CognitoUnauthenticatedRole81C8959B"}]}}}}}}},"IdentityPoolRoleAttachment":{"id":"IdentityPoolRoleAttachment","path":"TaskApp-dev/Cognito/IdentityPoolRoleAttachment","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPoolRoleAttachment","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPoolRoleAttachment","aws:cdk:cloudformation:props":{"identityPoolId":{"Ref":"CognitoIdentityPool2E2E339F"},"roles":{"authenticated":{"Fn::GetAtt":["CognitoAuthenticatedRole61C456EC","Arn"]},"unauthenticated":{"Fn::GetAtt":["CognitoUnauthenticatedRole81C8959B","Arn"]}}}}},"UserPoolId":{"id":"UserPoolId","path":"TaskApp-dev/Cognito/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"TaskApp-dev/Cognito/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"IdentityPoolId":{"id":"IdentityPoolId","path":"TaskApp-dev/Cognito/IdentityPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"UserTableName":{"id":"UserTableName","path":"TaskApp-dev/Cognito/UserTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}}}},"TaskApi":{"id":"TaskApi","path":"TaskApp-dev/TaskApi","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"TaskTable":{"id":"TaskTable","path":"TaskApp-dev/TaskApi/TaskTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}]}}},"ScalingRole":{"id":"ScalingRole","path":"TaskApp-dev/TaskApi/TaskTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}}}},"TaskFunction":{"id":"TaskFunction","path":"TaskApp-dev/TaskApi/TaskFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.202.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"TaskApp-dev/TaskApi/TaskFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.202.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"TaskApp-dev/TaskApi/TaskFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.202.0","metadata":[]}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"TaskApp-dev/TaskApi/TaskFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TaskApiTaskTable8901E7AD","Arn"]},{"Ref":"AWS::NoValue"}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["EventBusTaskEventBusB09EB18E","Arn"]}}],"Version":"2012-10-17"},"policyName":"TaskApiTaskFunctionServiceRoleDefaultPolicyFDC3171C","roles":[{"Ref":"TaskApiTaskFunctionServiceRoleF0B32085"}]}}}}}}},"Code":{"id":"Code","path":"TaskApp-dev/TaskApi/TaskFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.202.0"},"children":{"Stage":{"id":"Stage","path":"TaskApp-dev/TaskApi/TaskFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.202.0"}},"AssetBucket":{"id":"AssetBucket","path":"TaskApp-dev/TaskApi/TaskFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.202.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-265613951253-us-east-1","s3Key":"44bc3cd203276ac8050aa00a4bcaabf4c9f6f84ae6ddaeaa7aa84521578bbaaf.zip"},"environment":{"variables":{"TASK_TABLE_NAME":{"Ref":"TaskApiTaskTable8901E7AD"},"REGION":"us-east-1","ENVIRONMENT":"dev","EVENT_BUS_NAME":{"Ref":"EventBusTaskEventBusB09EB18E"},"USER_POOL_ID":{"Ref":"CognitoUserPool279BBD48"}}},"handler":"taskFunction.handler","role":{"Fn::GetAtt":["TaskApiTaskFunctionServiceRoleF0B32085","Arn"]},"runtime":"nodejs18.x"}}}}},"TaskApi":{"id":"TaskApi","path":"TaskApp-dev/TaskApi/TaskApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API for task operations","name":"Task API"}}},"Deployment":{"id":"Deployment","path":"TaskApp-dev/TaskApi/TaskApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API for task operations","restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"TaskApp-dev/TaskApi/TaskApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"TaskApiDeployment2158AB502a636e1622d3ba1f7d65a28e25fb9406"},"restApiId":{"Ref":"TaskApi71A863D8"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"TaskApp-dev/TaskApi/TaskApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.202.0"}},"Default":{"id":"Default","path":"TaskApp-dev/TaskApi/TaskApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.202.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"TaskApp-dev/TaskApi/TaskApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["TaskApi71A863D8","RootResourceId"]},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"tasks":{"id":"tasks","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["TaskApi71A863D8","RootResourceId"]},"pathPart":"tasks","restApiId":{"Ref":"TaskApi71A863D8"}}}},"OPTIONS":{"id":"OPTIONS","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"TaskApitasks5FAFDD7C"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"GET":{"id":"GET","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.TaskAppdevTaskApi99CF8C66.GET..tasks":{"id":"ApiPermission.TaskAppdevTaskApi99CF8C66.GET..tasks","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/GET/ApiPermission.TaskAppdevTaskApi99CF8C66.GET..tasks","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/",{"Ref":"TaskApiDeploymentStageprod9DED2229"},"/GET/tasks"]]}}}},"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.GET..tasks":{"id":"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.GET..tasks","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/GET/ApiPermission.Test.TaskAppdevTaskApi99CF8C66.GET..tasks","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/test-invoke-stage/GET/tasks"]]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"TaskApiTaskApiAuthorizer9B560BAB"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"TaskApitasks5FAFDD7C"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"POST":{"id":"POST","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.TaskAppdevTaskApi99CF8C66.POST..tasks":{"id":"ApiPermission.TaskAppdevTaskApi99CF8C66.POST..tasks","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/POST/ApiPermission.TaskAppdevTaskApi99CF8C66.POST..tasks","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/",{"Ref":"TaskApiDeploymentStageprod9DED2229"},"/POST/tasks"]]}}}},"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.POST..tasks":{"id":"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.POST..tasks","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/POST/ApiPermission.Test.TaskAppdevTaskApi99CF8C66.POST..tasks","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/test-invoke-stage/POST/tasks"]]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"TaskApiTaskApiAuthorizer9B560BAB"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"TaskApitasks5FAFDD7C"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"{taskId}":{"id":"{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"TaskApitasks5FAFDD7C"},"pathPart":"{taskId}","restApiId":{"Ref":"TaskApi71A863D8"}}}},"OPTIONS":{"id":"OPTIONS","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"TaskApitaskstaskIdD8486894"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"GET":{"id":"GET","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.TaskAppdevTaskApi99CF8C66.GET..tasks.{taskId}":{"id":"ApiPermission.TaskAppdevTaskApi99CF8C66.GET..tasks.{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/GET/ApiPermission.TaskAppdevTaskApi99CF8C66.GET..tasks.{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/",{"Ref":"TaskApiDeploymentStageprod9DED2229"},"/GET/tasks/*"]]}}}},"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.GET..tasks.{taskId}":{"id":"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.GET..tasks.{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/GET/ApiPermission.Test.TaskAppdevTaskApi99CF8C66.GET..tasks.{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/test-invoke-stage/GET/tasks/*"]]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"TaskApiTaskApiAuthorizer9B560BAB"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"TaskApitaskstaskIdD8486894"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"PUT":{"id":"PUT","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.TaskAppdevTaskApi99CF8C66.PUT..tasks.{taskId}":{"id":"ApiPermission.TaskAppdevTaskApi99CF8C66.PUT..tasks.{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/PUT/ApiPermission.TaskAppdevTaskApi99CF8C66.PUT..tasks.{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/",{"Ref":"TaskApiDeploymentStageprod9DED2229"},"/PUT/tasks/*"]]}}}},"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.PUT..tasks.{taskId}":{"id":"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.PUT..tasks.{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/PUT/ApiPermission.Test.TaskAppdevTaskApi99CF8C66.PUT..tasks.{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/test-invoke-stage/PUT/tasks/*"]]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"TaskApiTaskApiAuthorizer9B560BAB"},"httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"TaskApitaskstaskIdD8486894"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"DELETE":{"id":"DELETE","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.TaskAppdevTaskApi99CF8C66.DELETE..tasks.{taskId}":{"id":"ApiPermission.TaskAppdevTaskApi99CF8C66.DELETE..tasks.{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/DELETE/ApiPermission.TaskAppdevTaskApi99CF8C66.DELETE..tasks.{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/",{"Ref":"TaskApiDeploymentStageprod9DED2229"},"/DELETE/tasks/*"]]}}}},"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.DELETE..tasks.{taskId}":{"id":"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.DELETE..tasks.{taskId}","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/DELETE/ApiPermission.Test.TaskAppdevTaskApi99CF8C66.DELETE..tasks.{taskId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/test-invoke-stage/DELETE/tasks/*"]]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"TaskApiTaskApiAuthorizer9B560BAB"},"httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"TaskApitaskstaskIdD8486894"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"complete":{"id":"complete","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"TaskApitaskstaskIdD8486894"},"pathPart":"complete","restApiId":{"Ref":"TaskApi71A863D8"}}}},"OPTIONS":{"id":"OPTIONS","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"TaskApitaskstaskIdcomplete6CC5C6E0"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}},"PATCH":{"id":"PATCH","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/PATCH","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.202.0","metadata":[]},"children":{"ApiPermission.TaskAppdevTaskApi99CF8C66.PATCH..tasks.{taskId}.complete":{"id":"ApiPermission.TaskAppdevTaskApi99CF8C66.PATCH..tasks.{taskId}.complete","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/PATCH/ApiPermission.TaskAppdevTaskApi99CF8C66.PATCH..tasks.{taskId}.complete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/",{"Ref":"TaskApiDeploymentStageprod9DED2229"},"/PATCH/tasks/*/complete"]]}}}},"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.PATCH..tasks.{taskId}.complete":{"id":"ApiPermission.Test.TaskAppdevTaskApi99CF8C66.PATCH..tasks.{taskId}.complete","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/PATCH/ApiPermission.Test.TaskAppdevTaskApi99CF8C66.PATCH..tasks.{taskId}.complete","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:265613951253:",{"Ref":"TaskApi71A863D8"},"/test-invoke-stage/PATCH/tasks/*/complete"]]}}}},"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApi/Default/tasks/{taskId}/complete/PATCH/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"TaskApiTaskApiAuthorizer9B560BAB"},"httpMethod":"PATCH","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["TaskApiTaskFunction636A3C06","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"TaskApitaskstaskIdcomplete6CC5C6E0"},"restApiId":{"Ref":"TaskApi71A863D8"}}}}}}}}}}}}}}}},"TaskApiAuthorizer":{"id":"TaskApiAuthorizer","path":"TaskApp-dev/TaskApi/TaskApiAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.202.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"TaskApp-dev/TaskApi/TaskApiAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.202.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"TaskApiCognitoAuthorizer","providerArns":[{"Fn::GetAtt":["CognitoUserPool279BBD48","Arn"]}],"restApiId":{"Ref":"TaskApi71A863D8"},"type":"COGNITO_USER_POOLS"}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"TaskApp-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"TaskApp-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.202.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"TaskApp-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.202.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"TaskApp-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.202.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}